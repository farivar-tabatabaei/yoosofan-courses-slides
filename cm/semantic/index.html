<html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta charset="UTF-8"><meta name="generator" content="bildumilo 1.0 https://github.com/yoosofan/bildumilo"><link rel="stylesheet" href="css/hovercraft.css" media="all"><link rel="stylesheet" href="css/highlight.css" media="all"><link rel="stylesheet" href="css/style.css" media="all"><link rel="stylesheet" href="css/semantic.css" media="all"><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body class="impress-not-supported"><div id="impress" data-width="1024" data-transition-duration="1000"><div class="step step-level-1" step="0" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="semantic-analyzer">Semantic Analyzer</h1><p>Ahmad Yoosofan</p><p>Compiler course</p><p>University of Kashan</p><script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script>
<script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script></div><div class="step step-level-1 grid-2col-class" step="1" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><ol><li>E &#8594; E + a</li><li>E &#8594; a</li></ol><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>` `</p></th><th><p>a</p></th><th><p>+</p></th><th><p>$</p></th><th><p>E</p></th></tr></thead><tbody><tr><td><p>0</p></td><td><p>s2</p></td><td></td><td></td><td><p>1</p></td></tr><tr><td><p>1</p></td><td></td><td><p>s3</p></td><td><p>acc</p></td><td></td></tr><tr><td><p>2</p></td><td></td><td><p>r2</p></td><td><p>r2</p></td><td></td></tr><tr><td><p>3</p></td><td><p>s4</p></td><td></td><td></td><td></td></tr><tr><td><p>4</p></td><td></td><td><p>r1</p></td><td><p>r1</p></td><td></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft"><thead><tr><th><p>Stack</p></th><th><p>Input</p></th><th><p>Action</p></th></tr></thead><tbody><tr><td><p><span class="math ">\(I_0\)</span></p></td><td><p>a[8]+a[9]$</p></td><td></td></tr><tr><td><p><span class="math ">\(I_0\)</span> a[8] <span class="math ">\(I_2\)</span></p></td><td><p>+a[9]$</p></td><td><p>r2(E &#8594; a)</p></td></tr><tr><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span></p></td><td><p>+a[9]$</p></td><td></td></tr><tr><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span></p></td><td><p>a[9]$</p></td><td></td></tr><tr><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span> a[9] <span class="math ">\(I_4\)</span></p></td><td><p>$</p></td><td><p>r1(E&#8594;E+a)</p></td></tr><tr><td><p><span class="math ">\(I_0\)</span> E[17] <span class="math ">\(I_1\)</span></p></td><td><p>$</p></td><td></td></tr><tr><td><p>acc</p></td><td></td><td></td></tr></tbody></table><div id="graph220"></div>
<script>
d3.select("#graph220").graphviz().renderDot(`

  digraph g {
    node [ shape = "plaintext" ];

    "a" [ label = "E[17]" ];
    "b" [ label = "E[8]" ];
    "d" [ label = "+" ];
    "c" [ label = "9" ];
    "e" [ label = "8" ];

    a -> c [dir="back"];
    a -> d [dir="back"];
    a -> b [dir="back"];
    b -> e [dir="back"];
  }
`);
</script></div><div class="step step-level-1 grid-2col-class" step="2" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft"><thead><tr><th><p>` `</p></th><th><p>Production</p></th><th><p>Semantic</p></th></tr></thead><tbody><tr><td><p>1</p></td><td><p>E &#8594; a</p></td><td><p>E.val = lexValue(a)</p></td></tr><tr><td><p>2</p></td><td><p>E &#8594; E + a</p></td><td><p>E.val = <span class="math ">\(E_1\)</span>.val + lexValue(a)</p></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder"><thead><tr><th><p>` `</p></th><th><p>a</p></th><th><p>+</p></th><th><p>$</p></th><th><p>E</p></th></tr></thead><tbody><tr><td><p>0</p></td><td><p>s2</p></td><td></td><td></td><td><p>1</p></td></tr><tr><td><p>1</p></td><td></td><td><p>s3</p></td><td><p>acc</p></td><td></td></tr><tr><td><p>2</p></td><td></td><td><p>r2</p></td><td><p>r2</p></td><td></td></tr><tr><td><p>3</p></td><td><p>s4</p></td><td></td><td></td><td></td></tr><tr><td><p>4</p></td><td></td><td><p>r1</p></td><td><p>r1</p></td><td></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft"><thead><tr><th><p>n</p></th><th><p>Stack</p></th><th><p>Input</p></th><th><p>Action</p></th></tr></thead><tbody><tr><td><p>0</p></td><td><p><span class="math ">\(I_0\)</span></p></td><td><p>a[8]+a[9]+a[2]$</p></td><td></td></tr><tr><td><p>1</p></td><td><p><span class="math ">\(I_0\)</span> a[8] <span class="math ">\(I_2\)</span></p></td><td><p>+a[9]+a[2]$</p></td><td><p>r2(E &#8594; a)</p></td></tr><tr><td><p>2</p></td><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span></p></td><td><p>+a[9]+a[2]$</p></td><td></td></tr><tr><td><p>3</p></td><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span></p></td><td><p>a[9]+a[2]$</p></td><td></td></tr><tr><td><p>4</p></td><td><p><span class="math ">\(I_0\)</span> E[8] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span> a[9] <span class="math ">\(I_4\)</span></p></td><td><p>+a[2]$</p></td><td><p>r1(E&#8594;E+a)</p></td></tr><tr><td><p>5</p></td><td><p><span class="math ">\(I_0\)</span> E[17] <span class="math ">\(I_1\)</span></p></td><td><p>+a[2]$</p></td><td></td></tr><tr><td><p>6</p></td><td><p><span class="math ">\(I_0\)</span> E[17] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span></p></td><td><p>a[2]$</p></td><td></td></tr><tr><td><p>7</p></td><td><p><span class="math ">\(I_0\)</span> E[17] <span class="math ">\(I_1\)</span> + <span class="math ">\(I_3\)</span> a[2] <span class="math ">\(I_4\)</span></p></td><td><p>$</p></td><td><p>r1(E&#8594;E+a)</p></td></tr><tr><td><p>8</p></td><td><p><span class="math ">\(I_0\)</span> E[19] <span class="math ">\(I_1\)</span></p></td><td><p>$</p></td><td></td></tr><tr><td><p>9</p></td><td><p>acc</p></td><td></td><td></td></tr></tbody></table><div id="graph240"></div>
<script>
d3.select("#graph240").graphviz().renderDot(`

  digraph g {
    node [ shape = "plaintext" ];

    "i" [ label = "E[19]" ];
    "a" [ label = "E[17]" ];
    "r" [ label = "+" ];
    "p" [ label = "a[2]" ];
    "b" [ label = "E[8]" ];
    "d" [ label = "+" ];
    "c" [ label = "a[9]" ];
    "e" [ label = "a[8]" ];

    i -> a [dir="back"];
    i -> r [dir="back"];
    i -> p [dir="back"];
    a -> c [dir="back"];
    a -> d [dir="back"];
    a -> b [dir="back"];
    b -> e [dir="back"];
  }
`);
</script></div><div class="step step-level-1" step="3" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><h1 id="anotated-parse-tree">Anotated parse tree</h1><p>a[8]+a[9]+a[2]</p><div id="graph260"></div>
<script>
d3.select("#graph260").graphviz().renderDot(`

  digraph g {
    node [ shape = "plaintext" ];

    "i" [ label = "E.val=19" ];
    "a" [ label = "E.val=17" ];
    "r" [ label = "+" ];
    "p" [ label = "a.val=2" ];
    "b" [ label = "E.val=8" ];
    "d" [ label = "+" ];
    "c" [ label = "a.val=9" ];
    "e" [ label = "a.val=8" ];

    i -> a [dir="back"];
    i -> r [dir="back"];
    i -> p [dir="back"];
    a -> c [dir="back"];
    a -> d [dir="back"];
    a -> b [dir="back"];
    b -> e [dir="back"];
  }
`);
</script></div><div class="step step-level-1 t2c" step="4" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><h1 id="dependency-graph">Dependency Graph</h1><ol><li>E &#8594; T + E</li><li>E &#8594; T</li><li>T &#8594; F * T</li><li>T &#8594; F</li><li>F &#8594; ( E )</li><li>F &#8594; a</li></ol><div id="graph280"></div>
<script>
d3.select("#graph280").graphviz().renderDot(`

  digraph g {
    node [ shape = "plaintext" ];

    "i" [ label = "E.val=19" ];
    "a" [ label = "E.val=17" ];
    "r" [ label = "+" ];
    "p" [ label = "a.val=2" ];
    "b" [ label = "E.val=8" ];
    "d" [ label = "+" ];
    "c" [ label = "a.val=9" ];
    "e" [ label = "a.val=8" ];

    i -> a [dir="back"];
    i -> r [dir="back"];
    i -> p [dir="back"];
    a -> c [dir="back"];
    a -> d [dir="back"];
    a -> b [dir="back"];
    b -> e [dir="back"];
  }
`);
</script></div><div class="step step-level-1 t2c" step="5" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><h1 id="syntax-directed-definition">Syntax-Directed Definition</h1><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>S &#8594; E n</p></td><td><p>print(E.v)</p></td></tr><tr><td><p>E &#8594; <span class="math ">\(E_1+T\)</span></p></td><td><p><span class="math ">\(E.v=E_1.v + T.v\)</span></p></td></tr><tr><td><p>E &#8594; T</p></td><td><p><span class="math ">\(E.v=T.v\)</span></p></td></tr><tr><td><p>T &#8594; <span class="math ">\(T_1*F.v\)</span></p></td><td><p><span class="math ">\(T.v=T_1.v * F.v\)</span></p></td></tr><tr><td><p>T &#8594; F</p></td><td><p><span class="math ">\(T.v=F.v\)</span></p></td></tr><tr><td><p>F &#8594; ( E )</p></td><td><p><span class="math ">\(F.v=E.v\)</span></p></td></tr><tr><td><p>F &#8594; a</p></td><td><p><span class="math ">\(F.v=a.lexval\)</span></p></td></tr></tbody></table><img src="img/graph_2.png"></div><div class="step step-level-1 grid-2col-class" step="6" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><pre class="highlight code python"><span class="ln"> 1 </span><span class="n">tokens</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'NUMBER'</span><span class="p">,</span><span class="s1">'PLUS'</span><span class="p">,</span> <span class="s1">'MINUS'</span><span class="p">,</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="s1">'MUL'</span><span class="p">,</span> <span class="s1">'DIV'</span><span class="p">,</span> <span class="s1">'LPAR'</span><span class="p">,</span> <span class="s1">'RPAR'</span><span class="p">)</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span><span class="n">t_PLUS</span>     <span class="o">=</span> <span class="sa">r</span><span class="s1">'\+'</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span><span class="n">t_MINUS</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\-'</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="n">t_MUL</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\*'</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span><span class="n">t_DIV</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'/'</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span><span class="n">t_LPAR</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\('</span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="n">t_RPAR</span>    <span class="o">=</span> <span class="sa">r</span><span class="s1">'\)'</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">t_NUMBER</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="sa">r</span><span class="s1">'[0-9]+'</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="n">t</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="k">return</span> <span class="n">t</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="n">t_ignore</span> <span class="o">=</span> <span class="s2">" </span><span class="se">\t</span><span class="s2">"</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span><span class="k">def</span> <span class="nf">t_error</span><span class="p">(</span><span class="n">t</span><span class="p">):</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Illegal character '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>    <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="n">t</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.lex</span> <span class="k">as</span> <span class="nn">lex</span><span class="p">;</span><span class="n">lex</span><span class="o">.</span><span class="n">lex</span><span class="p">()</span></pre><pre class="highlight code python"><span class="ln">1 </span><span class="kn">import</span> <span class="nn">ply.yacc</span> <span class="k">as</span> <span class="nn">yacc</span><span class="p">;</span> <span class="n">yacc</span><span class="o">.</span><span class="n">yacc</span><span class="p">()</span><span class="w">
</span><span class="ln">2 </span><span class="w"></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">3 </span><span class="w"></span>  <span class="k">try</span><span class="p">:</span><span class="w">
</span><span class="ln">4 </span><span class="w"></span>    <span class="n">s</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'calc &gt; '</span><span class="p">)</span><span class="w">
</span><span class="ln">5 </span><span class="w"></span>    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="s1">''</span><span class="p">:</span><span class="k">break</span><span class="w">
</span><span class="ln">6 </span><span class="w"></span>    <span class="n">yacc</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="ln">7 </span><span class="w"></span>  <span class="k">except</span><span class="p">:</span><span class="w">
</span><span class="ln">8 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'unexpected error'</span><span class="p">)</span></pre></div><div class="step step-level-1 grid-2col-class" step="7" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><pre class="highlight code python"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">p_S</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="s1">'S : E'</span> <span class="c1"># S &#8594; E</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s1">'S &#8594; E '</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_E_plus_T</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>  <span class="s1">'E : E PLUS T'</span> <span class="c1"># E &#8594; E + T</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_E_MINUS_T</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="s1">'E : E MINUS T'</span> <span class="c1"># E &#8594; E - T</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="ln">12 </span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_E_T</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="s1">'E : T'</span> <span class="c1"># E &#8594; T</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">16 </span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_T_MUL_F</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="s1">'T : T MUL F'</span> <span class="c1"># T &#8594; T * F</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span></pre><pre class="highlight code python"><span class="ln"> 1 </span><span class="k">def</span> <span class="nf">p_T_DIV_F</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span>  <span class="s1">'T : T DIV F'</span> <span class="c1"># T &#8594; T / F</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>    <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>  <span class="k">else</span><span class="p">:</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'Error: Divide by zero '</span><span class="p">);</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>    <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_T_F</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="s1">'T : F'</span> <span class="c1"># T &#8594; F</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">12 </span><span class="w">
</span><span class="ln">13 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_F_a</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="s1">'F : NUMBER'</span> <span class="c1"># F &#8594; a</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">16 </span><span class="w">
</span><span class="ln">17 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_F_lpar_E_rpar</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">18 </span><span class="w"></span>  <span class="s1">'F : LPAR E RPAR'</span> <span class="c1"># F &#8594; ( E )</span><span class="w">
</span><span class="ln">19 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></pre></div><div class="step step-level-1" step="8" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><h1 id="inherited-attribute">Inherited Attribute</h1><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>D &#8594; T L</p></td><td><p>L.in = T.type</p></td></tr><tr><td><p>T &#8594; int</p></td><td><p>T.type = integer</p></td></tr><tr><td><p>T &#8594; real</p></td><td><p>T.type = real</p></td></tr><tr><td><p>L &#8594; L1, id</p></td><td><p>L1.in = L.in,   addtype(id.entry,L.in)</p></td></tr><tr><td><p>L &#8594; id</p></td><td><p>addtype(id.entry,L.in)</p></td></tr></tbody></table><ul><li>int i</li><li>int a,b,c</li><li>real x,y</li></ul><ol><li>D &#8594; T {L.in = T.type} L</li><li>T &#8594; int {T.type = integer}</li><li>T &#8594; real {T.type = real}</li><li>L &#8594; {L1.in = L.in} L1, id {addtype(id.entry,L.in)}</li><li>L &#8594; id {addtype(id.entry,L.in)}</li></ol></div><div class="step step-level-1" step="9" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><p>real a, b, c</p><img src="img/dependency_graph_for_declaration.png" align="center"></div><div class="step step-level-1" step="10" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><ol><li>&lt;src/ply/420.type.py&gt;_</li><li>&lt;src/ply/426.type.py&gt;_</li><li>&lt;src/ply/430.type.py&gt;_</li><li>&lt;src/ply/436.type.literals.py&gt;_</li></ol></div><div class="step step-level-1" step="11" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>L &#8594; E \n</p></td><td><p>print(val[top-1])</p></td></tr><tr><td><p>E &#8594; E1 + T</p></td><td><p>val[ntop] = val[top-2] + val[top]</p></td></tr><tr><td><p>E &#8594; T</p></td><td></td></tr><tr><td><p>T &#8594; T1 * F</p></td><td><p>val[ntop] = val[top-2] * val[top]</p></td></tr><tr><td><p>T &#8594; F</p></td><td></td></tr><tr><td><p>F &#8594; ( E )</p></td><td><p>val[ntop] = val[top-1]</p></td></tr><tr><td><p>F &#8594; digit</p></td><td></td></tr></tbody></table></div><div class="step step-level-1 t2c" step="12" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="19200" data-y="0" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th></th><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>1</p></td><td><p>A &#8594; B</p></td><td><p>print(B.n0),  print(B.n1)</p></td></tr><tr><td><p>2</p></td><td><p>B &#8594; 0 B1</p></td><td><p>B.n0=B1.n0+1,  B.n1=B1.n1</p></td></tr><tr><td><p>3</p></td><td><p>B &#8594; 1 B1</p></td><td><p>B.n0=B1.n0,  B.n1=B1.n1+1</p></td></tr><tr><td><p>4</p></td><td><p>B &#8594; &#955;</p></td><td><p>B.n0=0,  B.n1=0</p></td></tr></tbody></table><div id="graph300"></div>
<script>
d3.select("#graph300").graphviz().renderDot(`

  digraph g {
    node [ shape = "plaintext" ];

    "A" [ label = "print(B.n0);print(B.n1);" ];
    "B1" [ label = "E.val=17" ];
    "r" [ label = "+" ];
    "p" [ label = "a.val=2" ];
    "b" [ label = "E.val=8" ];
    "d" [ label = "+" ];
    "c" [ label = "a.val=9" ];
    "e" [ label = "a.val=8" ];

    A -> a [dir="back"];
    i -> r [dir="back"];
    i -> p [dir="back"];
    a -> c [dir="back"];
    a -> d [dir="back"];
    a -> b [dir="back"];
    b -> e [dir="back"];
  }
`);
</script></div><div class="step step-level-1" step="13" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="20800" data-y="0" data-z="0"><img src="img/constructing_syntax_tree_for_simple.png" align="center"></div><div class="step step-level-1" step="14" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="22400" data-y="0" data-z="0"><img src="img/constructing_syntax_tree_for_simple_syntax_tree.png" align="center"></div><div class="step step-level-1" step="15" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="24000" data-y="0" data-z="0"><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>E &#8594; E1 + T</p></td><td><p>E.loc=newtemp() , <br> E.code = E1.code || T.code || 'add E.loc, E1.loc, T.loc'</p></td></tr><tr><td><p>E &#8594; T</p></td><td><p>E.loc = T.loc, E.code=T.code</p></td></tr><tr><td><p>T &#8594; T1 * F</p></td><td><p>T.loc=newtemp() , <br> T.code = T1.code || F.code  || 'mult T.loc, T1.loc, F.loc'</p></td></tr><tr><td><p>T &#8594; F</p></td><td><p>T.loc = F.loc, T.code=F.code</p></td></tr><tr><td><p>F &#8594; ( E )</p></td><td><p>F.loc = E.loc,  F.code=E.code</p></td></tr><tr><td><p>F &#8594; id</p></td><td><p>F.loc = id.name,  F.code= &#8220;&#8221;</p></td></tr></tbody></table><ul><li>3 * 4 + 5</li><li>t1 &#8592; 3 * 4,  mult t1, 3 , 4</li><li>t2 &#8592; t1 + 5, add t2, t1, 5</li><li>mult t1, 3 , 4</li><li>add t2, t1, 5</li><li>(3 * 4) + 5</li><li>F &#8594; (E)</li><li>E &#8594; T</li><li>T &#8594; T * F</li><li>t1 &#8592; 3 * 4,  mult t1, 3 , 4</li><li>t2 &#8592; t1 + 5, add t2, t1, 5</li></ul></div><div class="step step-level-1 grid-2col-class" step="16" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="25600" data-y="0" data-z="0"><pre class="highlight code python"><span class="ln"> 1 </span><span class="n">lastTempValue</span> <span class="o">=</span> <span class="mi">0</span><span class="w">
</span><span class="ln"> 2 </span><span class="w"></span><span class="k">def</span> <span class="nf">newTemp</span><span class="p">():</span><span class="w">
</span><span class="ln"> 3 </span><span class="w"></span>  <span class="k">global</span> <span class="n">lastTempValue</span><span class="w">
</span><span class="ln"> 4 </span><span class="w"></span>  <span class="n">lastTempValue</span> <span class="o">+=</span><span class="mi">1</span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span>  <span class="n">s1</span> <span class="o">=</span> <span class="s1">'t'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lastTempValue</span><span class="p">)</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>  <span class="k">return</span> <span class="n">s1</span><span class="p">;</span><span class="w">
</span><span class="ln"> 7 </span><span class="w">
</span><span class="ln"> 8 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_S</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span>  <span class="s1">'S : E'</span> <span class="c1"># S &#8594; E</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">"code"</span><span class="p">])</span><span class="w">
</span><span class="ln">11 </span><span class="w">
</span><span class="ln">12 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_E_plus_T</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="s1">'E : E PLUS T'</span> <span class="c1"># E &#8594; E + T</span><span class="w">
</span><span class="ln">14 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span><span class="w">
</span><span class="ln">15 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">]</span> <span class="o">=</span> <span class="n">newTemp</span><span class="p">()</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span><span class="o">+</span>\
<span class="ln">17 </span>    <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span><span class="o">+</span>\
<span class="ln">18 </span>    <span class="s1">'add '</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span>\
<span class="ln">19 </span>    <span class="s1">', '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span>\
<span class="ln">20 </span>    <span class="s1">', '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="w">
</span><span class="ln">21 </span><span class="w">
</span><span class="ln">22 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_E_T</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span>  <span class="s1">'E : T'</span> <span class="c1"># E &#8594; T</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">25 </span><span class="w">
</span><span class="ln">26 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_T_MUL_F</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>  <span class="s1">'T : T MUL F'</span> <span class="c1"># T &#8594; T * F</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">]</span> <span class="o">=</span> <span class="n">newTemp</span><span class="p">()</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span><span class="o">+</span>\
<span class="ln">31 </span>    <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span><span class="o">+</span>\</pre><pre class="highlight code python"><span class="ln"> 1 </span>    <span class="s1">'mult '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span>\
<span class="ln"> 2 </span>    <span class="s1">', '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span>\
<span class="ln"> 3 </span>    <span class="s1">', '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">])</span><span class="o">+</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="w">
</span><span class="ln"> 4 </span><span class="w">
</span><span class="ln"> 5 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_T_F</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln"> 6 </span><span class="w"></span>  <span class="s1">'T : F'</span> <span class="c1"># T &#8594; F</span><span class="w">
</span><span class="ln"> 7 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln"> 8 </span><span class="w">
</span><span class="ln"> 9 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_F_a</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">10 </span><span class="w"></span>  <span class="s1">'F : NUMBER'</span> <span class="c1"># F &#8594; a</span><span class="w">
</span><span class="ln">11 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span><span class="w">
</span><span class="ln">12 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"loc"</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span><span class="ln">13 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"code"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span><span class="w">
</span><span class="ln">14 </span><span class="w">
</span><span class="ln">15 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_F_lpar_E_rpar</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">16 </span><span class="w"></span>  <span class="s1">'F : LPAR E RPAR'</span> <span class="c1"># F &#8594; ( E )</span><span class="w">
</span><span class="ln">17 </span><span class="w"></span>  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w">
</span><span class="ln">18 </span><span class="w">
</span><span class="ln">19 </span><span class="w"></span><span class="k">def</span> <span class="nf">p_error</span><span class="p">(</span><span class="n">p</span><span class="p">):</span><span class="w">
</span><span class="ln">20 </span><span class="w"></span>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Syntax error at '</span><span class="si">%s</span><span class="s2">'"</span> <span class="o">%</span> <span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="ln">21 </span><span class="w">
</span><span class="ln">22 </span><span class="w"></span><span class="kn">import</span> <span class="nn">ply.yacc</span> <span class="k">as</span> <span class="nn">yacc</span><span class="p">;</span><span class="w">
</span><span class="ln">23 </span><span class="w"></span><span class="n">yacc</span><span class="o">.</span><span class="n">yacc</span><span class="p">()</span><span class="w">
</span><span class="ln">24 </span><span class="w"></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span><span class="w">
</span><span class="ln">25 </span><span class="w"></span>  <span class="k">try</span><span class="p">:</span><span class="w">
</span><span class="ln">26 </span><span class="w"></span>    <span class="n">s</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'calc &gt; '</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="w">
</span><span class="ln">27 </span><span class="w"></span>    <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span><span class="k">break</span><span class="w">
</span><span class="ln">28 </span><span class="w"></span>    <span class="n">yacc</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="ln">29 </span><span class="w"></span>  <span class="k">except</span><span class="p">:</span><span class="w">
</span><span class="ln">30 </span><span class="w"></span>    <span class="nb">print</span><span class="p">(</span><span class="s1">'unexpected error'</span><span class="p">)</span></pre></div><div class="step step-level-1" step="17" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="27200" data-y="0" data-z="0"><h1 id="translation-scheme">Translation Scheme</h1><ul><li>E &#8594; T R</li><li>R &#8594; + T { print("+") } R1</li><li>R &#8594; &#955;</li><li>T &#8594; id { print(id.name) }</li></ul><p>a+b+c</p><p>E &#8594; T R &#8594; id(a){print(id.name)} R &#8594; R &#8594; + T  {print("+")} R1 &#8594; T  {print("+")} R1</p><p>id(b){print(id.name)} {print("+")} R1 &#8594; {print("+")} R1 &#8594; R1 &#8594; + T {print("+")} R1</p><p>&#8594; T {print("+")} R1 &#8594; id(c){print(id.name)} {print("+")} R1 &#8594; {print("+")} R1</p><p>&#8594; R1 &#8594; &#955;</p><p>a b + c +</p></div><div class="step step-level-1" step="18" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="28800" data-y="0" data-z="0"><img src="img/sdd_top_down_expression.png" align="center"><img src="img/sdd_top_down_expression_dependency_graph.png" align="center"></div><div class="step step-level-1" step="19" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="30400" data-y="0" data-z="0"><img src="img/type_definition_grammar.png" align="center"></div><div class="step step-level-1" step="20" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="32000" data-y="0" data-z="0"><img src="img/constructing_tree_top_down_parsing.png" align="center"></div><div class="step step-level-1" step="21" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="33600" data-y="0" data-z="0"><img src="img/constructing_tree_top_down_parsing_dependency_graph.png" align="center"></div><div class="step step-level-1" step="22" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="35200" data-y="0" data-z="0"><h1 id="specification">Specification</h1><ul><li class="substep">attributes</li><li class="substep">Semantic Rules</li><li class="substep">may generate intermediate codes</li><li class="substep">may put information into the symbol table</li><li class="substep">may perform type checking</li><li class="substep">may issue error messages</li><li class="substep">may perform some other activities</li><li class="substep">in fact, they may perform almost any activities.</li><li class="substep">An attribute may hold almost any thing.</li><li class="substep">a string, a number, a memory location, a complex record.</li><li class="substep">inherited attribute</li><li class="substep">synthesized attribute</li></ul></div><div class="step step-level-1" step="23" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="36800" data-y="0" data-z="0"><h1 id="s-attributed-definitions">S-Attributed Definitions</h1><ul><li class="substep">An SDD that involves only synthesized attributes is called S-attributed</li><li class="substep">An S-attributed SDD can be implemented naturally in conjunction with an LR parser.</li></ul></div><div class="step step-level-1" step="24" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="38400" data-y="0" data-z="0"><h1 id="circular-dependency">circular dependency</h1><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>A &#8594; B</p></td><td><p>A.s = B.i  ,   B.i = A.s + 1</p></td></tr></tbody></table><img src="img/The_circular_dependency.png" align="center"></div><div class="step step-level-1" step="25" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="40000" data-y="0" data-z="0"><h1 id="l-attributed-definitions">L-Attributed Definitions</h1><p>Each attribute must be either</p><ol><li class="substep">Synthesized, or</li><li class="substep">Inherited, but for every rule like <span class="math ">\(A &#8594; X_1X_2 ... X_n\)</span> which contains an inherited attribute <span class="math ">\(X_i.a\)</span>, the rule may use only:<blockquote><ul><li class="substep">Inherited attributes associated with the head A.</li><li class="substep">attributes associated with the occurrences of symbols <span class="math ">\(X_1, X_2 , . . . , X_{i-1}\)</span> is located to the left of <span class="math ">\(X_i\)</span>.</li></ul></blockquote></li></ol></div><div class="step step-level-1" step="26" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="41600" data-y="0" data-z="0"><p>Examples</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center substep"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>D &#8594; T L</p></td><td><p>L.in = T.type</p></td></tr><tr><td><p>T &#8594; int</p></td><td><p>T.type = integer</p></td></tr><tr><td><p>T &#8594; real</p></td><td><p>T.type = real</p></td></tr><tr><td><p>L &#8594; <span class="math ">\(L_1\)</span>, id</p></td><td><p><span class="math ">\(L_1\)</span>.in = L.in,   addtype(id.entry,L.in)</p></td></tr><tr><td><p>L &#8594; id</p></td><td><p>addtype(id.entry,L.in)</p></td></tr></tbody></table><p class="substep">.</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center substep"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>E &#8594; F R</p></td><td><p>R.inh = F.val , E.val = R.val</p></td></tr><tr><td><p>R &#8594; + F <span class="math ">\(R_1\)</span></p></td><td><p><span class="math ">\(R_1\)</span>.inh = R.inh + F.val , R.val = <span class="math ">\(R_1\)</span>.val</p></td></tr><tr><td><p>R &#8594; &#955;</p></td><td><p>R.val = R.inh</p></td></tr><tr><td><p>F &#8594; ( E )</p></td><td><p>F.val = E.val</p></td></tr><tr><td><p>F &#8594; digit</p></td><td><p>F.val = digit.lexval</p></td></tr></tbody></table></div><div class="step step-level-1" step="27" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="43200" data-y="0" data-z="0"><p>Not L-Attributed</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center substep"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>A &#8594; B D</p></td><td><p>A.s = B.b , B.i = f(D.d, A.s)</p></td></tr></tbody></table><p class="substep">.</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center substep"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>A &#8594; L M</p></td><td><p>L.in = f1(A.i), M.in = f2(L.s), A.s = f3(M.s)</p></td></tr><tr><td><p>A &#8594; Q R</p></td><td><p>R.in = f4(A.in), Q.in = f5(R.s), A.s = f3(Q.s)</p></td></tr></tbody></table></div><div class="step step-level-1" step="28" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="44800" data-y="0" data-z="0"><p>Translation Scheme vs SDD</p><p class="substep">SDD</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center substep"><thead><tr><th><p>Production</p></th><th><p>Semantic Rules</p></th></tr></thead><tbody><tr><td><p>E &#8594; F R</p></td><td><p>R.inh = F.val , E.val = R.val</p></td></tr><tr><td><p>R &#8594; + F <span class="math ">\(R_1\)</span></p></td><td><p><span class="math ">\(R_1\)</span>.inh = R.inh + F.val , R.val = <span class="math ">\(R_1\)</span>.val</p></td></tr><tr><td><p>R &#8594; &#955;</p></td><td><p>R.val = R.inh</p></td></tr><tr><td><p>F &#8594; ( E )</p></td><td><p>F.val = E.val</p></td></tr><tr><td><p>F &#8594; digit</p></td><td><p>F.val = digit.lexval</p></td></tr></tbody></table><p class="substep">Translation Scheme</p><table cellpadding="0" cellspacing="0" class="smallerelementwithfullborder yoosofantextalignleft center substep"><thead><tr><th><p>Production and Semantic Rules</p></th></tr></thead><tbody><tr><td><p>E &#8594; F {R.inh = F.val} R {E.val = R.val}</p></td></tr><tr><td><p>R &#8594; + F {<span class="math ">\(R_1\)</span>.inh = R.inh + F.val} <span class="math ">\(R_1\)</span> {R.val = <span class="math ">\(R_1\)</span>.val}</p></td></tr><tr><td><p>R &#8594; &#955; {R.val = R.inh}</p></td></tr><tr><td><p>F &#8594; ( E ) {F.val = E.val}</p></td></tr><tr><td><p>F &#8594; digit {F.val = digit.lexval}</p></td></tr></tbody></table></div><div class="step step-level-1" step="29" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="46400" data-y="0" data-z="0"><p>SDD for typesetting boxes</p><img src="img/SDD_for_typesetting_boxes.png" align="center"></div><div class="step step-level-1" step="30" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="48000" data-y="0" data-z="0"><h1 id="end">End</h1><div id="graph88220"></div>
<script>
d3.select("#graph88220").graphviz().renderDot(`

  digraph g {
    node [ shape = "plaintext" ];

    "a" [ label = "E.val = 9" ];
    "b" [ label = "E.val = 5" ];
    "d" [ label = "+" ];
    "c" [ label = "a.val = 4" ];
    "e" [ label = "a.val = 5" ];

    a -> { c d b } [dir="back"];
    b -> e [dir="back"];
  }
`);
</script></div><div class="step step-level-1" step="31" style="width: 1024px;" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="49600" data-y="0" data-z="0"></div></div><div id="slide-number" class="slide-number">
         1
      </div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/gotoSlide.js"></script><script type="text/javascript" src="js/hovercraft.js"></script><script type="text/javascript">
      document.getElementById("impress").addEventListener("impress:stepenter", update_slide_number, false);
    </script></body></html>